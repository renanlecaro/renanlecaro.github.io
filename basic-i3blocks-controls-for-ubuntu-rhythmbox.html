<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Basic i3blocks controls for ubuntu rhythmbox - Renan LE CARO</title><meta name="description" content="I've switched over from Spotify to Rhythmbox today. Spotify was a bit unstable on my system, it sometimes even struggled to playback offline playlists. I'm back to the good old 'music' folder with files of long forgotten origins. The default ubuntu music player, rhythmbox, seems&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://lecaro.me/basic-i3blocks-controls-for-ubuntu-rhythmbox.html"><link rel="alternate" type="application/atom+xml" href="https://lecaro.me/feed.xml"><link rel="alternate" type="application/json" href="https://lecaro.me/feed.json"><meta property="og:title" content="Basic i3blocks controls for ubuntu rhythmbox"><meta property="og:site_name" content="Renan LE CARO"><meta property="og:description" content="I've switched over from Spotify to Rhythmbox today. Spotify was a bit unstable on my system, it sometimes even struggled to playback offline playlists. I'm back to the good old 'music' folder with files of long forgotten origins. The default ubuntu music player, rhythmbox, seems&hellip;"><meta property="og:url" content="https://lecaro.me/basic-i3blocks-controls-for-ubuntu-rhythmbox.html"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@RenanLeCaro"><meta name="twitter:title" content="Basic i3blocks controls for ubuntu rhythmbox"><meta name="twitter:description" content="I've switched over from Spotify to Rhythmbox today. Spotify was a bit unstable on my system, it sometimes even struggled to playback offline playlists. I'm back to the good old 'music' folder with files of long forgotten origins. The default ubuntu music player, rhythmbox, seems&hellip;"><link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin><style>:root {
              --body-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              --heading-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              --logo-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
              --menu-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
           }</style><link rel="stylesheet" href="https://lecaro.me/assets/css/main.css?v=adf9c646ca416aff97afd632c9133472"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://lecaro.me/basic-i3blocks-controls-for-ubuntu-rhythmbox.html"},"headline":"Basic i3blocks controls for ubuntu rhythmbox","datePublished":"2021-03-25T11:21","dateModified":"2021-03-26T23:22","description":"I've switched over from Spotify to Rhythmbox today. Spotify was a bit unstable on my system, it sometimes even struggled to playback offline playlists. I'm back to the good old 'music' folder with files of long forgotten origins. The default ubuntu music player, rhythmbox, seems&hellip;","author":{"@type":"Person","name":"Renan LE CARO"},"publisher":{"@type":"Organization","name":"Renan LE CARO"}}</script><style>.hero {
    height: auto;
    margin-top: 200px;
  }
.hero__content {
    position: initial;
    transform: none;
}</style></head><body><div class="site-container"><header class="top" id="js-header"><a class="logo" href="https://lecaro.me/">Renan LE CARO</a><nav class="navbar js-navbar"><ul class="navbar__menu"><li><a href="https://lecaro.me/hi-im-renan.html" target="_self">About</a></li><li><a href="https://lecaro.me/" target="_self">Posts</a></li></ul></nav></header><main><article class="post"><div class="hero"><header class="hero__content"><div class="wrapper"><div class="post__meta"><time datetime="2021-03-25T11:21">March 25, 2021</time></div><h1>Basic i3blocks controls for ubuntu rhythmbox</h1></div></header></div><div class="wrapper post__entry"><p>I've switched over from Spotify to Rhythmbox today. Spotify was a bit unstable on my system, it sometimes even struggled to playback offline playlists.</p><p>I'm back to the good old "music" folder with files of long forgotten origins.  </p><p>The default ubuntu music player, rhythmbox,  seems not too bad, i don't need it to do much anyway. </p><p>I just had to port my i3 bar script to : </p><ul><li>show the track currently playing</li><li>go to next track on right click</li><li>play/pause on left click<br><br></li></ul><p> </p><figure class="post__image align-center"><img loading="lazy" src="https://lecaro.me/media/posts/17/i3script" alt="" width="478" height="53"></figure><p>The look of the "widget", pretty basic. </p><p>I wanted to add a play/pause icon but </p><ul><li>i didn't find a way to ask rhythmbox-client if the  music is played or paused</li><li>my ears are usually enough to know if anything i s playing </li></ul><p>I also added a little regexp to remove anything in parenthesis in the track name, to remove "(Original mix)" mentions and such. </p><p>.config/i3/i3blocks.conf :</p><pre>[music]<br>command=node ~/.config/i3/rhythmbox.js<br>interval=5</pre><p><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">The actual node script (I suck at bash, that's why i'm using node for this)</span></p><p><span style="color: var(--text-editor-body-color); font-family: var(--font-base); font-size: inherit; font-weight: var(--font-weight-normal);">~/.config/i3/rhythmbox.js</span></p><pre><br>const {execSync}=require('child_process')<br><br>// apply click actions<br>switch(process.env.BLOCK_BUTTON){<br>  case  '1': execSync('rhythmbox-client --play-pause');<br>    break; <br>  case  '3': execSync('rhythmbox-client --next');<br>    break;<br>}<br><br>// get track name<br>const playing=(execSync('rhythmbox-client --print-playing').toString())||'';<br><br>// clean track name<br>const formatted=playing.replace(/\([^\)]+\)/gi,'')<br><br>// output it<br>console.log(formatted);</pre></div></article></main><footer class="footer"><div class="footer__copyright"><p>+33 6 28 35 01 14 (Whatsapp only)</p><p><a href="mailto:renan.lecaro@gmail.com">renan.lecaro@gmail.com</a></p></div></footer></div><script async defer="defer" data-domain="lecaro.me" src="https://stats.lecaro.me/js/index.js"></script></body></html>